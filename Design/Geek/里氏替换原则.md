# 里氏替换原则

简单描述：简称 LSP 原则，子类对象能替换在程序中父类对象出现的任何地方，并且保证原来程序的逻辑行为不变及正确性不被破坏。

## 哪些会违背 LSP

按照协议来设计（Design by Contract）：子类在设计的时候，要遵循父类的行为约定（或者叫协议）。**父类定义了函数的行为约定，那子类可以改变函数的内部实现逻辑，但不能改变函数原有的行为约定**，行为约定包括了，函数声明要实现的功能；对输入、输出、异常的约定甚至包括了注释中所罗列的任何特殊说明。实际上，子类和父类之间的关系，也是可以替换为实现类和接口的关系。

1. 子类违背了父类的实现功能

   父类某个函数查询按金额排序，子类却按照时间排序。

2. 子类违背父类对输入、输出、异常的约定

   子类某个函数对输入的数据校验比父类更加严格，子类抛出了比父类更多的异常。

3. 子类违背父类注释中所罗列的任何特殊说明

   父类提款函数约定提款金额不得大于存款，但是子类提款函数约定vip账户能透支提现。

## 和多态的区别

从定义和代码实现来看，多态和里氏替换是类似的，但是他们的关注点是不一样的。多态是面向对象编程的一大特性，也是面向对象编程语言的一种语法，**是代码的实现思路**。而里氏替换是一种设计原则，用来**指导继承关系中子类该如何去设计**，子类的设计要保证再替换父类的时候，不改变原有程序的逻辑不破坏原有程序的正确性。