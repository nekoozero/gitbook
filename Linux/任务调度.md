# crond任务调度

任务调度：是指系统在某个时间执行的特定的命令或程序

分类：1. 系统工作，某些重要的工作必须周而复始地执行。如病毒扫描等

​            2. 个别用户工作，个别用户可能希望执行某些程序，比如对mysql数据库的备份。

## 简单示例

```
crontab -e
```

设置个人任务调度（编辑命令 -e）

``` 
*/1 * * * * ls –l  /etc/ > /tmp/to.txt
```

意思说每小时的每分钟执行ls –l /etc/ > /tmp/to.txt命令 

## 参数说明

* 5个占位符

| 项目      | 含义                 | 范围                    |
| --------- | -------------------- | ----------------------- |
| 第一个“*” | 一小时当中的第几分钟 | 0-59                    |
| 第二个“*” | 一天当中的第几个小时 | 0-23                    |
| 第三个“*” | 一个月当中的第几天   | 1-31                    |
| 第四个“*” | 一年当中的第几月     | 1-12                    |
| 第五个“*” | 一周当中的星期几     | 0-7（0和7都代表星期日） |

* 特殊符号说明

| 特殊符号 | 含义                                                         |
| -------- | ------------------------------------------------------------ |
| *        | 代表任何时间。第一个“*”就代表一小时中每分钟都执行一次        |
| ,        | 代表不连续的时间，比如“0 8,12,16 * * *”命令，就代表在每天的8点0分，12点0分，16点0分都执行一次命令 |
| -        | 代表连续的时间范围。比如“0 5 * * 1-6”，代表在周一到周六的凌晨5点0分执行命令 |
| */n      | 代表每隔多久执行一次，比如“*/10 * * * *”，代表每隔10分钟就执行一遍命令 |

## 案例

| 时间         | 含义                                                         |
| ------------ | ------------------------------------------------------------ |
| 45 22 * * *  | 在22点45分执行命令                                           |
| 0 17 * * 1   | 每周一的17点0分执行命令                                      |
| 0 5 1,15 * * | 每月1号和15号的凌晨5点0分执行命令                            |
| 40 4 * * 1-5 | 每周一到周五的凌晨4点40分执行命令                            |
| */10 4 * * * | 每天的凌晨4点 每隔10分钟执行一次 （到了5点就不执行了 也就是每天执行6次） |
| 0 0 1,15 * 1 | 每月1号和15号，每周1的0点0分都会执行命令。                   |

**注意：星期几和 几号最好不要同时出现，因为他们定义的都是天。非常容易让管理员混乱**

## 应用实例

1. 每隔一分钟 就将当前的日期消息 追加到 /tmp/mydate文件中

   * 先编写一个文件 /home/mytask2.sh

     date >> /tmp/mydate

   * 给mytask2.sh 一个可执行权限

     chmod 744 /home/mytask2.sh

   * crontab -e

     */1 * * * /home/mytask2.sh

   * 成功

2. 每天凌晨两点将mysql数据库testdb (数据库密码为root)，备份到文件中mydb.bak

   * 先编写一个文件 /home/mytask3.sh 

     /usr/local/mysql/bin/mysqldump -u root -proot testdb > /tmp/mydb.bak 

   * 给mytask3.sh 一个可执行权限

     chmod 744 /home/mytask3.sh

   * crontab -e 

     */1 * * * /home/mytask3.sh

   * 成功

## 相关指令

1. crontab -r: 种植任务调度
2. crontab -l: 列出当前有哪些任务调度
3. service crond restart [重启任务调度]

参考网站：

https://www.cnblogs.com/ftl1012/p/crontab.html

https://www.cnblogs.com/kenshinobiy/p/7685229.html