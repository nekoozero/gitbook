# TCP

## 确保可靠性的 TCP

TCP 位于传输层，提供可靠的字节流服务。

> 字节流服务（byte stream service）：为了方便传输，将大块数据分割成以报文段(segment)为单位的数据包进行管理。而可靠的传输服务是指，能够把数据准确可靠地传给对方。
>
> TCP 协议为了更容易传送大数据才把数据分割，而且 TCP 协议能够确认数据与最终是否送达到对方。

TCP 采用了三次握手（three-way handshaking）策略。用 TCP 协议把数据包送出去后，TCP 不会对传送后的情况置之不理，它一定会向对方确认是否成功送达。握手过程中使用了 TCP 的标志（flag）——SYN(synchronize) 和 ACK（acknowledgement）。

**发送端首先发送一个带 SYN 标志的数据包给对方。接受端收到后，回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。最后，发送端再回传一个带 ACK 标志的数据包，代表“握手”结束。**

**若在握手过程中某个阶段莫名中断，TCP 协议会再次以相同的顺序发送相同的数据包。**

除了三次握手，TCP 还有其他方式来保证通信的可靠。

![109205ed29cead827c25afec5871c543.png](http://www.qxnekoo.cn:8888/images/2020/05/23/109205ed29cead827c25afec5871c543.png)



















